<html>
    <head>
	    <style type="text/css"> 
			select option {white-space: pre;} 
			.miDiv	{border: solid 1px black;margin-bottom: 10px; padding: 5px 5px 5px 5px;}
		</style> 
    
        <title>Applet de firma</title>
<script type="text/javascript" language="javascript" src="constantes.js"></script>
		<script type="text/javascript" language="javascript" src="common-js/time.js"></script>
		<script type="text/javascript" language="javascript" src="common-js/appletHelper.js"></script>
		<script type="text/javascript" language="javascript" src="common-js/instalador.js"></script>
		<!--<script type="text/javascript" language="javascript" src="common-js/firma.js"></script>-->

		<script type="text/javascript" language="javascript">
	
			
			function prueba(cadena)
			{
				alert(cadena);
			}
			
			
		
			function firmaFichero(ruta, formato, algoritmo)
			{
				clienteFirma.initialize();
				clienteFirma.setSignatureFormat(formato);
				clienteFirma.setSignatureAlgorithm(algoritmo);
				clienteFirma.setFileUri(ruta);
				clienteFirma.sign();
				return clienteFirma.getSignatureBase64Encoded();
			}
			
			function isCargado()
			{
				var isCargado= ((clienteFirma!= undefined) && (clienteFirma.isInitialized()));
				return isCargado ;
			}
			
			function isFirmadoOError()
			{
				return ((clienteFirma.getSignature()!= undefined) || (clienteFirma.isError()));
			}
			
			function firmaDatosBase64(datos, formato, algoritmo)
			{
				
				clienteFirma.initialize();
				clienteFirma.setSignatureFormat(formato);
				clienteFirma.setSignatureAlgorithm(algoritmo);
				clienteFirma.setData(datos);
				clienteFirma.sign();
				return clienteFirma.getSignatureBase64Encoded();
			}
			
			function firmarHashEnBase64(hash, formato, algoritmo)
			{
				clienteFirma.initialize();
				clienteFirma.setSignatureFormat(formato);
				clienteFirma.setSignatureAlgorithm(algoritmo);
				clienteFirma.setHash(hash);
				clienteFirma.sign();
				return clienteFirma.getSignatureBase64Encoded();
			}
			
			
			
			function firmaDatosBase64Sin(datos, formato)
			{
				
				clienteFirma.initialize();
				clienteFirma.setSignatureFormat(formato);
				
				clienteFirma.setData(datos);
				clienteFirma.sign();
				return clienteFirma.getSignatureBase64Encoded();
			}
			
			function firmarHashEnBase64Sin(hash, formato)
			{
				clienteFirma.initialize();
				clienteFirma.setSignatureFormat(formato);
				
				clienteFirma.setHash(hash);
				clienteFirma.sign();
				return clienteFirma.getSignatureBase64Encoded();
			}
			
			function firmaCoSignBase64(firmaUri, hash, formato, algoritmo)
			{
				clienteFirma.initialize();
				clienteFirma.setSignatureFormat(formato);
				clienteFirma.setSignatureAlgorithm(algoritmo);
				clienteFirma.setElectronicSignatureFile(firmaUri);
				clienteFirma.setHash(hash);
				clienteFirma.coSign();
				return clienteFirma.getSignatureBase64Encoded();
			}
			
			function firmaCounterSignBase64(firmaUri, formato)
			{
				clienteFirma.initialize();
				clienteFirma.setSignatureFormat(formato);
				clienteFirma.setElectronicSignatureFile(firmaUri);
				clienteFirma.counterSignTree();
				return clienteFirma.getSignatureBase64Encoded();
			}
			
			function firma(formato, algoritmo)
			{
				clienteFirma.initialize();
				clienteFirma.setSignatureFormat(formato);
				clienteFirma.setSignatureAlgorithm(algoritmo);
				clienteFirma.sign();
				return clienteFirma.getSignatureBase64Encoded();
			}
			
			
			function dameUltimoCertificadoUsadoParaFirmarCodificadoEnBase64()
			{
				return clienteFirma.getSignCertificateBase64Encoded();
			}
			
			function damePathUltimoDocumentoFirmado()
			{	
				return clienteFirma.getFileUsedPath();
			}
		</script>
    </head>
    <body onload="cargarAppletFirma();">

    </body>
</html>